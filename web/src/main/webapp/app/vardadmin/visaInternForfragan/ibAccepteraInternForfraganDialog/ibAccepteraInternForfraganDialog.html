<div class="ib-acceptera-internforfragan-dialog-template">

  <form name="forfraganSvarForm" novalidate autocomplete="off">
    <div class="modal-header">
      <button type="button" class="close" data-ng-click="$dismiss()">×</button>
      <h3><span message key="internforfragan.besvara.form.acceptera.title"></span></h3>
    </div>

    <fieldset ng-disabled="vm.fetchingPreferences">
      <div class="modal-body">
        <ib-bottom-fadeout>
          <div class="flex-grid">
            <div class="col">
              <ib-help-text-label label-key="internforfragan.besvara.form.borjadatum.label"></ib-help-text-label>
              <ib-date-picker-field dom-id="borjaDatum" target-model="vm.model.borjaDatum"
                                    min-date="{{::vm.minBorjaDatum}}"
                                    min-date-error="Möjligt startdatum får tidigast vara dagens datum"
                                    format="yyyy-MM-dd"
                                    date-format-error="Ogiltigt datumformat, ange ett datum som ÅÅÅÅ-MM-DD"
                                    ib-date-picker-field add-date-parser="strict"></ib-date-picker-field>
            </div>
          </div>

          <div class="flex-grid">
            <div class="col">
              <ib-help-text-label label-key="internforfragan.besvara.form.utforaretyp.label"></ib-help-text-label>
              <ib-radio-wrapper>
                <input ng-attr-id="utforarTypEnhet" type="radio" value="ENHET" ng-model="vm.model.utforareTyp"
                       ng-change="onChangeUtforareTyp()">
                <label ng-attr-for="utforarTypEnhet">Vårdenhet</label>
              </ib-radio-wrapper>
              <ib-radio-wrapper>
                <input ng-attr-id="utforarTypUnderleverantor" type="radio" value="UNDERLEVERANTOR"
                       ng-model="vm.model.utforareTyp" ng-change="onChangeUtforareTyp()">
                <label ng-attr-for="utforarTypUnderleverantor">Underleverantör</label>
              </ib-radio-wrapper>
            </div>
          </div>

          <div class="flex-grid">
            <div class="col">
              <ib-help-text-label label-key="internforfragan.besvara.form.kontaktinformation.label"
                                  help-key="internforfragan.besvara.form.kontaktinformation.label.help"></ib-help-text-label>
              <ib-horisontal-textfield id="utforareNamn" model="vm.model.utforareNamn" required="true"
                                       required-error="Fyll i mottagarnamn"
                                       label-key="internforfragan.besvara.form.utforarenamn.label"
                                       max-length="255"></ib-horisontal-textfield>


            </div>
          </div>
          <div class="flex-grid">
            <div class="col">
              <ib-horisontal-textfield id="adress" model="vm.model.utforareAdress" required="true"
                                       required-error="Fyll i adress"
                                       label-key="internforfragan.besvara.form.utforareadress.label"
                                       max-length="255"></ib-horisontal-textfield>
            </div>
          </div>

          <!-- combined postnr/ort -->
          <div class="flex-grid">
            <div class="col">
              <ib-zipcode id="postnummer" model="vm.model.utforarePostnr"
                          label-key="internforfragan.besvara.form.utforarepostnr.label"
                          required="true" pattern-error="Fyll i postnummer, 5 siffror"
                          required-error="Fyll i postnummer, 5 siffror"></ib-zipcode>

            </div>
            <div class="col col-2">
              <ib-horisontal-textfield id="postort" model="vm.model.utforarePostort" required="true"
                                       required-error="Fyll i postort"
                                       label-key="internforfragan.besvara.form.utforarepostort.label"
                                       max-length="255"></ib-horisontal-textfield>
            </div>
          </div>

          <div class="flex-grid">
            <div class="col">
              <ib-horisontal-textfield id="telefonnummer" model="vm.model.utforareTelefon"
                                       label-key="internforfragan.besvara.form.utforaretelefon.label"
                                       max-length="255"></ib-horisontal-textfield>
            </div>
          </div>
          <div class="flex-grid">
            <div class="col">
              <ib-horisontal-textfield id="epost" model="vm.model.utforareEpost"
                                       label-key="internforfragan.besvara.form.utforareepost.label"
                                       pattern="{{vm.emailPattern}}" pattern-error="Fyll i giltig e-postadress"
                                       max-length="255"></ib-horisontal-textfield>
            </div>
          </div>


          <div class="flex-grid">
            <div class="col">

              <ib-help-text-label label-key="internforfragan.besvara.form.kommentar.label"
                                  help-key="internforfragan.besvara.form.kommentar.label.help"></ib-help-text-label>
              <ib-textarea id="kommentar" model="vm.model.kommentar" placeholder-text="Skriv meddelande här"
                           max-length="255"></ib-textarea>
            </div>
          </div>

          <ib-alert-message alert-id="vardenhet-load-error" alert-severity="danger" ng-if="vm.model.errorKey"
                            alert-message-id="{{vm.model.errorKey}}">

          </ib-alert-message>
        </ib-bottom-fadeout>
      </div>
    </fieldset>


    <div class="modal-footer">
      <ib-button btn-id="accept-internforfragan-btn" btn-class="btn-primary" btn-disabled="!acceptButtonEnabled()"
                 busy="vm.busy" btn-click="onConfirmAccept()">
        <span message key="internforfragan.besvara.acceptbtn.send.label"></span>
      </ib-button>

      <ib-button btn-id="cancel-dialog-btn" btn-class="btn-default" btn-disabled="false" btn-click="$dismiss()">
        <span message key="common.cancel"></span>
      </ib-button>
    </div>
  </form>
</div>