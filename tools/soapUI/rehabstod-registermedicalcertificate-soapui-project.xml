<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="caa02659-5f39-4497-a088-1428fb362414" activeEnvironment="Default" name="RegisterMedicalCertificateInteraction_3.1_rivtabp20" resourceRoot="" soapui-version="5.3.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:WsdlInterface" id="6b95d506-bcfc-4ac1-a8c9-d88349d06d05" wsaVersion="NONE" name="RegisterMedicalCertificateResponderBinding" type="wsdl" bindingName="{urn:riv:insuranceprocess:healthreporting:RegisterMedicalCertificate:3:rivtabp20}RegisterMedicalCertificateResponderBinding" soapVersion="1_1" anonymous="optional" definition="file:/Users/mango/Projects/Inera/Develop/sklintyg/schemas/rivta/insuranceprocess-healthreporting/schemas/interactions/RegisterMedicalCertificateInteraction/RegisterMedicalCertificateInteraction_3.1_rivtabp20.wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="file:/Users/mango/Projects/Inera/Develop/sklintyg/schemas/rivta/insuranceprocess-healthreporting/schemas/interactions/RegisterMedicalCertificateInteraction/RegisterMedicalCertificateInteraction_3.1_rivtabp20.wsdl"><con:part><con:url>file:/Users/mango/Projects/Inera/Develop/sklintyg/schemas/rivta/insuranceprocess-healthreporting/schemas/interactions/RegisterMedicalCertificateInteraction/RegisterMedicalCertificateInteraction_3.1_rivtabp20.wsdl</con:url><con:content><![CDATA[<!--~ Copyright (C) 2016 Inera AB (http://www.inera.se)
  ~
  ~ This file is part of sklintyg (https://github.com/sklintyg).
  ~
  ~ sklintyg is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ sklintyg is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.-->
<!--Licensed to the Apache Software Foundation (ASF) under one
 or more contributor license agreements. See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership. The ASF licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License. You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied. See the License for the
 specific language governing permissions and limitations
 under the License.-->
<wsdl:definitions name="RegisterMedicalCertificateInteraction" targetNamespace="urn:riv:insuranceprocess:healthreporting:RegisterMedicalCertificate:3:rivtabp20" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:wsa="http://www.w3.org/2005/08/addressing" xmlns:tjs="urn:riv:insuranceprocess:healthreporting:RegisterMedicalCertificateResponder:3" xmlns:tns="urn:riv:insuranceprocess:healthreporting:RegisterMedicalCertificate:3:rivtabp20">
  <xs:annotation>
    <xs:documentation>Tjänsteinteraktionens namn: RegisterMedicalCertificateInteraction
			Beskrivning: 
				Interaction to register a new medical certificate.
			Revisioner: 
				2009-12-04 Version 1.0, Mats Ekhammar - Callista Enterprise AB
				2010-06-18 Version 2.0, Mats Ekhammar - Callista Enterprise AB
				2010-11-18 Version 3.0, Mats Ekhammar - Callista Enterprise AB
				2013-05-23 Version 3.1, Mats Ekhammar - Callista Enterprise AB
			Tjänstedomän: insuranceprocess:healthreporting
			Tjänsteinteraktionstyp: Fråga-svar
			RIV Teknisk Anvisning: Basic Profile 2.0
			Förvaltas av: xxx</xs:documentation>
  </xs:annotation>
  <wsdl:types>
    <xs:schema>
      <xs:import schemaLocation="./RegisterMedicalCertificateResponder_3.1.xsd" namespace="urn:riv:insuranceprocess:healthreporting:RegisterMedicalCertificateResponder:3"/>
    </xs:schema>
    <xs:schema>
      <xs:import schemaLocation="../../core_components/ws-addressing-1.0.xsd" namespace="http://www.w3.org/2005/08/addressing"/>
    </xs:schema>
  </wsdl:types>
  <wsdl:message name="RegisterMedicalCertificateRequest">
    <xs:annotation>
      <xs:documentation>LogicalAddress is the organization id for Försäkringskassan.</xs:documentation>
    </xs:annotation>
    <wsdl:part name="LogicalAddress" element="wsa:To"/>
    <wsdl:part name="parameters" element="tjs:RegisterMedicalCertificate"/>
  </wsdl:message>
  <wsdl:message name="RegisterMedicalCertificateResponse">
    <wsdl:part name="parameters" element="tjs:RegisterMedicalCertificateResponse"/>
  </wsdl:message>
  <wsdl:portType name="RegisterMedicalCertificateResponderInterface">
    <wsdl:operation name="RegisterMedicalCertificate">
      <wsdl:input message="tns:RegisterMedicalCertificateRequest"/>
      <wsdl:output message="tns:RegisterMedicalCertificateResponse"/>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="RegisterMedicalCertificateResponderBinding" type="tns:RegisterMedicalCertificateResponderInterface">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="RegisterMedicalCertificate">
      <soap:operation soapAction="urn:riv:insuranceprocess:healthreporting:RegisterMedicalCertificateResponder:1"/>
      <wsdl:input>
        <soap:header use="literal" message="tns:RegisterMedicalCertificateRequest" part="LogicalAddress"/>
        <soap:body use="literal" parts="parameters"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="RegisterMedicalCertificateResponderService">
    <wsdl:port name="RegisterMedicalCertificateResponderPort" binding="tns:RegisterMedicalCertificateResponderBinding">
      <soap:address location="http://tempuri.org"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>file:/Users/mango/Projects/Inera/Develop/sklintyg/schemas/rivta/insuranceprocess-healthreporting/schemas/interactions/RegisterMedicalCertificateInteraction/RegisterMedicalCertificateResponder_3.1.xsd</con:url><con:content><![CDATA[<!--~ Copyright (C) 2016 Inera AB (http://www.inera.se)
  ~
  ~ This file is part of sklintyg (https://github.com/sklintyg).
  ~
  ~ sklintyg is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ sklintyg is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.-->
<!--Licensed to the Apache Software Foundation (ASF) under one
 or more contributor license agreements. See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership. The ASF licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License. You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied. See the License for the
 specific language governing permissions and limitations
 under the License.-->
<xs:schema targetNamespace="urn:riv:insuranceprocess:healthreporting:RegisterMedicalCertificateResponder:3" elementFormDefault="qualified" attributeFormDefault="unqualified" version="3.1" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:mu7263="urn:riv:insuranceprocess:healthreporting:mu7263:3" xmlns:core="urn:riv:insuranceprocess:healthreporting:2" xmlns:tns="urn:riv:insuranceprocess:healthreporting:RegisterMedicalCertificateResponder:3">
  <xs:import namespace="urn:riv:insuranceprocess:healthreporting:mu7263:3" schemaLocation="../../core_components/MU7263-RIV_3.1.xsd"/>
  <xs:import namespace="urn:riv:insuranceprocess:healthreporting:2" schemaLocation="../../core_components/insuranceprocess_healthreporting_2.0.xsd"/>
  <xs:element name="RegisterMedicalCertificate" type="tns:RegisterMedicalCertificateType"/>
  <xs:element name="RegisterMedicalCertificateResponse" type="tns:RegisterMedicalCertificateResponseType"/>
  <xs:complexType name="RegisterMedicalCertificateType">
    <xs:sequence>
      <xs:element name="lakarutlatande" type="mu7263:lakarutlatandeType"/>
      <xs:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="RegisterMedicalCertificateResponseType">
    <xs:sequence>
      <xs:element name="result" type="core:ResultOfCall" minOccurs="0" maxOccurs="1"/>
      <xs:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:/Users/mango/Projects/Inera/Develop/sklintyg/schemas/rivta/insuranceprocess-healthreporting/schemas/core_components/MU7263-RIV_3.1.xsd</con:url><con:content><![CDATA[<!--~ Copyright (C) 2016 Inera AB (http://www.inera.se)
  ~
  ~ This file is part of sklintyg (https://github.com/sklintyg).
  ~
  ~ sklintyg is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ sklintyg is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.-->
<!--edited with XMLSpy v2009 sp1 (http://www.altova.com) by Viktor Jernelöv (Mawell Svenska AB)-->
<xs:schema targetNamespace="urn:riv:insuranceprocess:healthreporting:mu7263:3" elementFormDefault="qualified" attributeFormDefault="unqualified" version="3.1" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:core="urn:riv:insuranceprocess:healthreporting:2" xmlns:iso="urn:iso:21090:dt:1" xmlns="urn:riv:insuranceprocess:healthreporting:mu7263:3">
  <xs:annotation>
    <xs:documentation>Förändringar
			2013-05-23: Elementet prognosangivelse är ej obligatoriskt, dvs minOccurs=0</xs:documentation>
  </xs:annotation>
  <xs:import namespace="urn:riv:insuranceprocess:healthreporting:2" schemaLocation="./insuranceprocess_healthreporting_2.0.xsd"/>
  <xs:import namespace="urn:iso:21090:dt:1" schemaLocation="./iso_dt_subset_1.0.xsd"/>
  <xs:element name="lakarutlatande" type="lakarutlatandeType">
    <xs:annotation>
      <xs:documentation>Root-elementet för informationsinnehållet i MU7263. Klassen motsvarar i dagsläget själva blanketten</xs:documentation>
    </xs:annotation>
  </xs:element>
  <xs:simpleType name="Referenstyp">
    <xs:annotation>
      <xs:documentation>Representerar de olika typer av referenser från vilken HoS-personalen fått information om patienten i det aktuella ärendet</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="Journaluppgifter"/>
      <xs:enumeration value="Annat"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="Vardkontakttyp">
    <xs:annotation>
      <xs:documentation>Representerar de olika typer av vårdkontakter som är giltiga</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="Min_undersokning_av_patienten"/>
      <xs:enumeration value="Min_telefonkontakt_med_patienten"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="Prognosangivelse">
    <xs:annotation>
      <xs:documentation>Representerar de angivelser för prognoser som är giltiga</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="Aterstallas_helt"/>
      <xs:enumeration value="Aterstallas_delvis"/>
      <xs:enumeration value="Inte_aterstallas"/>
      <xs:enumeration value="Det_gar_inte_att_bedomma"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="Nedsattningsgrad">
    <xs:annotation>
      <xs:documentation>Representerar de grader på nedsättning som är giltiga</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="Helt_nedsatt"/>
      <xs:enumeration value="Nedsatt_med_3/4"/>
      <xs:enumeration value="Nedsatt_med_1/2"/>
      <xs:enumeration value="Nedsatt_med_1/4"/>
    </xs:restriction>
  </xs:simpleType>
  <!--Referenserna till blanketten kan komma att behöva uppdateras då en ny version av denna kommer ut-->
  <xs:simpleType name="Aktivitetskod">
    <xs:annotation>
      <xs:documentation>Representerar de olika typer av aktivitetskoder som förekommer</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="Arbetslivsinriktad_rehabilitering_ar_aktuell">
        <xs:annotation>
          <xs:documentation>Mappas mot kryss 1, fält 7</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="Arbetslivsinriktad_rehabilitering_ar_ej_aktuell">
        <xs:annotation>
          <xs:documentation>Mappas mot kryss 2, fält 7</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="Gar_ej_att_bedomma_om_arbetslivsinriktad_rehabilitering_ar_aktuell">
        <xs:annotation>
          <xs:documentation>Mappas mot kryss 3, fält 7</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="Forandrat_ressatt_till_arbetsplatsen_ar_aktuellt">
        <xs:annotation>
          <xs:documentation>Mappas mot kryss 1, fält 11</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="Forandrat_ressatt_till_arbetsplatsen_ar_ej_aktuellt">
        <xs:annotation>
          <xs:documentation>Mappas mot kryss 2, fält 11</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="Planerad_eller_pagaende_behandling_eller_atgard_inom_sjukvarden">
        <xs:annotation>
          <xs:documentation>Mappas mot kryss 1, fält 6b</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="Planerad_eller_pagaende_annan_atgard">
        <xs:annotation>
          <xs:documentation>Mappas mot kryss 2, fält 6b</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="Kontakt_med_Forsakringskassan_ar_aktuell">
        <xs:annotation>
          <xs:documentation>Mappas mot kryss 1, fält 12</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="Patienten_behover_fa_kontakt_med_foretagshalsovarden">
        <xs:annotation>
          <xs:documentation>Mappas mot kryss 2, fält 6a</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="Avstangning_enligt_SmL_pga_smitta">
        <xs:annotation>
          <xs:documentation>Mappas mot kryss 1, fält 1</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="Ovrigt">
        <xs:annotation>
          <xs:documentation>Mappas mot kryss 3, fält 6a</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
      <xs:enumeration value="Patienten_behover_fa_kontakt_med_Arbetsformedlingen">
        <xs:annotation>
          <xs:documentation>Mappas mot kryss 1, fält 6a</xs:documentation>
        </xs:annotation>
      </xs:enumeration>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="TypAvSysselsattning">
    <xs:annotation>
      <xs:documentation>Representerar de typer av sysselsättning som är giltiga</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="Nuvarande_arbete"/>
      <xs:enumeration value="Arbetsloshet"/>
      <xs:enumeration value="Foraldraledighet"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="TypAvFunktionstillstand">
    <xs:annotation>
      <xs:documentation>Representerar de typer av funktionstillstånd som är giltiga</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:enumeration value="Aktivitet"/>
      <xs:enumeration value="Kroppsfunktion"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:complexType name="lakarutlatandeType">
    <xs:annotation>
      <xs:documentation>Klassen är utgångspunkt för schemat och representerar blanketten i helhet</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="lakarutlatande-id" type="xs:string">
        <xs:annotation>
          <xs:documentation>Attributet efterfrågas inte i blanketten utan är något som genereras av källsystemet och hämtas därifrån</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="typAvUtlatande" type="xs:string" fixed="Läkarintyg enligt 3 kap, 8 § lagen (1962:381) om allmän försäkring"/>
      <xs:element name="kommentar" type="xs:string" minOccurs="0"/>
      <xs:element name="signeringsdatum" type="xs:dateTime">
        <xs:annotation>
          <xs:documentation>Datum och eventuellt klockslag när signering skedde.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="skickatDatum" type="xs:dateTime">
        <xs:annotation>
          <xs:documentation>Datum och klockslag när läkarintyget skickades av systemet.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="patient" type="core:patientType"/>
      <xs:element name="skapadAvHosPersonal" type="core:hosPersonalType"/>
      <xs:element name="vardkontakt" type="vardkontaktType" minOccurs="0" maxOccurs="unbounded"/>
      <xs:element name="referens" type="referensType" minOccurs="0" maxOccurs="2"/>
      <xs:element name="aktivitet" type="aktivitetType" minOccurs="0" maxOccurs="unbounded"/>
      <xs:element name="bedomtTillstand" type="bedomtTillstandType" minOccurs="0"/>
      <xs:element name="medicinsktTillstand" type="medicinsktTillstandType" minOccurs="0"/>
      <xs:element name="funktionstillstand" type="funktionstillstandType" minOccurs="0" maxOccurs="2"/>
      <xs:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="vardkontaktType">
    <xs:annotation>
      <xs:documentation>Klassen innehåller all information om den vårdkontakt vid vilken underlaget till blanketten inhämtades</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="vardkontakttyp" type="Vardkontakttyp">
        <xs:annotation>
          <xs:documentation>Mappas mot fält 4 del 2 på blanketten (de två översta kryssalternativen)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="vardkontaktstid" type="xs:date">
        <xs:annotation>
          <xs:documentation>Mappas mot fält 4 del 2 på blanketten (de två översta alternativen under "Datum")</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="referensType">
    <xs:annotation>
      <xs:documentation>Klassen innehåller all information om de referenser som läkarutlåtandet baseras på</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="referenstyp" type="Referenstyp">
        <xs:annotation>
          <xs:documentation>Mappas mot fält 4 del 2 på blanketten (de två nedersta kryssalternativen)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="datum" type="xs:date" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Mappas mot fält 4 del 2 på blanketten (de två nedersta alternativen under "Datum")</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="aktivitetType">
    <xs:annotation>
      <xs:documentation>Klassen håller information om de aktiviteter/åtgärder som hanteras i blanketten. En instansiering av klassen akvititetType ska ske per kryss i de rutor som angetts i beskrivningen av Aktivitetskod ovan.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="aktivitetskod" type="Aktivitetskod">
        <xs:annotation>
          <xs:documentation>Mappas mot fält 6, 7, 11 och 12</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="beskrivning" type="xs:string" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Mappas mot fält 6 i de fall aktivitetskod motsvarar någon av de kryss som har möjlighet att definieras tydligare (de med en linje efter sig).</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="bedomtTillstandType">
    <xs:annotation>
      <xs:documentation>Klassen innehåller information om patientens generella bedömda tillstånd</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="beskrivning" type="xs:string" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Mappas mot fält 3</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="medicinsktTillstandType">
    <xs:annotation>
      <xs:documentation>Klassen innehåller information om patientens medicinska tillstånd.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="beskrivning" type="xs:string" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Mappas mot fält 2</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="tillstandskod" type="iso:CD" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Mappas mot fält 2 del 2 (ICD-10-koden)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="funktionstillstandType">
    <xs:annotation>
      <xs:documentation>Klassen innehåller information om patientens funktionstillstånd</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="beskrivning" type="xs:string" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Mappas mot fält 4 och 5. Informationen som återhämtas i fält 4 läggs i beskrivning med typAvFunktionstillstand satt till kroppsfunktion. Informationen som återhämtas i fält 5 läggs i beskrivning i en ny instans av klassen med typAvFunktionstillstand satt till Aktivitet.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="typAvFunktionstillstand" type="TypAvFunktionstillstand">
        <xs:annotation>
          <xs:documentation>Mappas mot fält 4 när det är kroppsfunktion och 5 när det är aktivitet</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="arbetsformaga" type="arbetsformagaType" minOccurs="0"/>
      <xs:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="arbetsformagaType">
    <xs:annotation>
      <xs:documentation>Klassen innehåller information om patientens bedömda arbetsförmåga</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="motivering" type="xs:string" minOccurs="0"/>
      <xs:element name="prognosangivelse" type="Prognosangivelse" minOccurs="0"/>
      <xs:element name="arbetsuppgift" type="arbetsuppgiftType" minOccurs="0"/>
      <xs:element name="arbetsformagaNedsattning" type="arbetsformagaNedsattningType" maxOccurs="4"/>
      <xs:element name="sysselsattning" type="sysselsattningType" minOccurs="0" maxOccurs="3"/>
      <xs:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="arbetsuppgiftType">
    <xs:annotation>
      <xs:documentation>Klassen innehåller information om patientens typer av arbetsuppgifter</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="typAvArbetsuppgift" type="xs:string">
        <xs:annotation>
          <xs:documentation>Mappas mot fält 8, de två översta strecken till höger</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="arbetsformagaNedsattningType">
    <xs:annotation>
      <xs:documentation>Klassen innehåller information om nedsättningen av patientens arbetsförmåga</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="varaktighetFrom" type="xs:date">
        <xs:annotation>
          <xs:documentation>Mappas mot fält 8, de fyra nedersta strecken till höger</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="varaktighetTom" type="xs:date">
        <xs:annotation>
          <xs:documentation>Mappas mot fält 8, de fyra nedersta strecken till höger</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="nedsattningsgrad" type="Nedsattningsgrad">
        <xs:annotation>
          <xs:documentation>Mappas mot fält 8, de fyra nedersta kryssrutorna</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="sysselsattningType">
    <xs:annotation>
      <xs:documentation>Klassen innehåller information om patientens sysselsättning</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="typAvSysselsattning" type="TypAvSysselsattning">
        <xs:annotation>
          <xs:documentation>Mappas mot fält 8, de tre översta kryssrutorna</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:/Users/mango/Projects/Inera/Develop/sklintyg/schemas/rivta/insuranceprocess-healthreporting/schemas/core_components/insuranceprocess_healthreporting_2.0.xsd</con:url><con:content><![CDATA[<!--~ Copyright (C) 2016 Inera AB (http://www.inera.se)
  ~
  ~ This file is part of sklintyg (https://github.com/sklintyg).
  ~
  ~ sklintyg is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ sklintyg is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.-->
<!--Licensed to the Apache Software Foundation (ASF) under one
	or more contributor license agreements. See the NOTICE file
	distributed with this work for additional information
	regarding copyright ownership. The ASF licenses this file
	to you under the Apache License, Version 2.0 (the
	"License"); you may not use this file except in compliance
	with the License. You may obtain a copy of the License at
	
	http://www.apache.org/licenses/LICENSE-2.0
	
	Unless required by applicable law or agreed to in writing,
	software distributed under the License is distributed on an
	"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, either express or implied. See the License for the
	specific language governing permissions and limitations
	under the License.-->
<xs:schema targetNamespace="urn:riv:insuranceprocess:healthreporting:2" elementFormDefault="qualified" attributeFormDefault="unqualified" version="2.0" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="urn:riv:insuranceprocess:healthreporting:2" xmlns:iso="urn:iso:21090:dt:1">
  <xs:import namespace="urn:iso:21090:dt:1" schemaLocation="./iso_dt_subset_1.0.xsd"/>
  <xs:annotation>
    <xs:documentation>Beskrivning: Gemensamma element för insuranceprocess_healthreporting
			Revisioner: 
			2010-05-20: Release version 1.0 mats.ekhammar@callistaenterprise.se.
			2010-11-17: Version 2.0 Upprensning och förenkling av mats ekhammar</xs:documentation>
  </xs:annotation>
  <xs:complexType name="hosPersonalType">
    <xs:sequence>
      <xs:element name="personal-id" type="iso:II">
        <xs:annotation>
          <xs:documentation>HSA-id, o.i.d för HSA-id är 1.2.752.129.2.1.4.1</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="fullstandigtNamn" type="xs:string" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Förnamn +  efternamn sammanslaget.
					Är tomt om personen har en skyddad identitet.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <!--Skyddad identitet-->
      <xs:element name="forskrivarkod" type="xs:string" minOccurs="0"/>
      <xs:element name="enhet" type="enhetType"/>
      <xs:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="enhetType">
    <xs:sequence>
      <xs:element name="enhets-id" type="iso:II">
        <xs:annotation>
          <xs:documentation>HSA-id, o.i.d för HSA-id är 1.2.752.129.2.1.4.1</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="arbetsplatskod" type="iso:II" minOccurs="0">
        <xs:annotation>
          <xs:documentation>o.i.d för arbetsplatskod är 1.2.752.29.4.71</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="enhetsnamn" type="xs:string"/>
      <xs:element name="postadress" type="xs:string" minOccurs="0"/>
      <xs:element name="postnummer" type="xs:string" minOccurs="0"/>
      <xs:element name="postort" type="xs:string" minOccurs="0"/>
      <xs:element name="telefonnummer" type="xs:string" minOccurs="0"/>
      <xs:element name="epost" type="xs:string" minOccurs="0"/>
      <xs:element name="vardgivare" type="vardgivareType" minOccurs="0"/>
      <xs:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="vardgivareType">
    <xs:sequence>
      <xs:element name="vardgivare-id" type="iso:II">
        <xs:annotation>
          <xs:documentation>HSA-id, o.i.d för HSA-id är 1.2.752.129.2.1.4.1</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="vardgivarnamn" type="xs:string"/>
      <xs:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="patientType">
    <xs:sequence>
      <xs:element name="person-id" type="iso:II">
        <xs:annotation>
          <xs:documentation>Personnummer eller samordningsnummer.
						o.i.d för personnummer är 1.2.752.129.2.1.3.1.
						o.i.d för samordningsnummer är 1.2.752.129.2.1.3.3</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="fullstandigtNamn" type="xs:string" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Förnamn +  efternamn sammanslaget.
					Är tomt om personen har en skyddad identitet.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ResultOfCall">
    <xs:annotation>
      <xs:documentation>Holds information about the success of the call. If INFO is set the field infoText should contain more information.
				If ERROR is set the fields errorId and errorText will contain information about the error.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="resultCode" type="ResultCodeEnum" minOccurs="1"/>
      <xs:element name="infoText" type="xs:string" minOccurs="0"/>
      <xs:element name="errorId" type="ErrorIdEnum" minOccurs="0"/>
      <xs:element name="errorText" type="xs:string" minOccurs="0"/>
      <xs:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:complexType>
  <xs:simpleType name="ResultCodeEnum">
    <xs:restriction base="xs:string">
      <xs:enumeration value="OK"/>
      <xs:enumeration value="ERROR"/>
      <xs:enumeration value="INFO"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="ErrorIdEnum">
    <xs:restriction base="xs:string">
      <xs:enumeration value="VALIDATION_ERROR"/>
      <xs:enumeration value="TRANSFORMATION_ERROR"/>
      <xs:enumeration value="APPLICATION_ERROR"/>
      <xs:enumeration value="TECHNICAL_ERROR"/>
    </xs:restriction>
  </xs:simpleType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:/Users/mango/Projects/Inera/Develop/sklintyg/schemas/rivta/insuranceprocess-healthreporting/schemas/core_components/iso_dt_subset_1.0.xsd</con:url><con:content><![CDATA[<!--~ Copyright (C) 2016 Inera AB (http://www.inera.se)
  ~
  ~ This file is part of sklintyg (https://github.com/sklintyg).
  ~
  ~ sklintyg is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ sklintyg is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.-->
<xsd:schema targetNamespace="urn:iso:21090:dt:1" elementFormDefault="qualified" attributeFormDefault="unqualified" version="1.0" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:sch="http://www.ascc.net/xml/schematron" xmlns="urn:iso:21090:dt:1">
  <xsd:annotation>
    <xsd:documentation>Subset of original iso_dt.xsd file.</xsd:documentation>
  </xsd:annotation>
  <xsd:simpleType name="Uid">
    <xsd:restriction base="xsd:string"/>
  </xsd:simpleType>
  <xsd:simpleType name="IdentifierScope">
    <xsd:restriction base="xsd:string">
      <xsd:enumeration value="BUSN"/>
      <xsd:enumeration value="OBJ"/>
      <xsd:enumeration value="VER"/>
      <xsd:enumeration value="VW"/>
    </xsd:restriction>
  </xsd:simpleType>
  <xsd:simpleType name="IdentifierReliability">
    <xsd:restriction base="xsd:string">
      <xsd:enumeration value="ISS"/>
      <xsd:enumeration value="VER"/>
      <xsd:enumeration value="UNV"/>
    </xsd:restriction>
  </xsd:simpleType>
  <xsd:simpleType name="NullFlavor">
    <xsd:restriction base="xsd:string">
      <xsd:enumeration value="NI"/>
      <xsd:enumeration value="INV"/>
      <xsd:enumeration value="OTH"/>
      <xsd:enumeration value="NINF"/>
      <xsd:enumeration value="PINF"/>
      <xsd:enumeration value="UNC"/>
      <xsd:enumeration value="DER"/>
      <xsd:enumeration value="UNK"/>
      <xsd:enumeration value="ASKU"/>
      <xsd:enumeration value="NAV"/>
      <xsd:enumeration value="QS"/>
      <xsd:enumeration value="NASK"/>
      <xsd:enumeration value="TRC"/>
      <xsd:enumeration value="MSK"/>
      <xsd:enumeration value="NA"/>
    </xsd:restriction>
  </xsd:simpleType>
  <xsd:simpleType name="UpdateMode">
    <xsd:restriction base="xsd:string">
      <xsd:enumeration value="A"/>
      <xsd:enumeration value="AU"/>
      <xsd:enumeration value="U"/>
      <xsd:enumeration value="R"/>
      <xsd:enumeration value="I"/>
      <xsd:enumeration value="D"/>
      <xsd:enumeration value="K"/>
    </xsd:restriction>
  </xsd:simpleType>
  <xsd:complexType name="HXIT" abstract="true">
    <xsd:annotation>
      <xsd:appinfo>
        <sch:pattern name="extension requires root">
          <sch:rule abstract="true" id="HXIT-0">
            <sch:assert test="not(@controlActExtension) or @controlActRoot"/>
          </sch:rule>
        </sch:pattern>
      </xsd:appinfo>
    </xsd:annotation>
    <xsd:attribute name="validTimeLow" type="xsd:string" use="optional"/>
    <xsd:attribute name="validTimeHigh" type="xsd:string" use="optional"/>
    <xsd:attribute name="controlActRoot" type="Uid" use="optional"/>
    <xsd:attribute name="controlActExtension" type="xsd:string" use="optional"/>
  </xsd:complexType>
  <xsd:complexType name="ANY">
    <xsd:annotation>
      <xsd:appinfo>
        <sch:pattern name="no ANY unless null">
          <sch:rule abstract="true" id="ANY-0">
            <sch:assert test="todo"/>
          </sch:rule>
        </sch:pattern>
      </xsd:appinfo>
    </xsd:annotation>
    <xsd:complexContent>
      <xsd:extension base="HXIT">
        <xsd:attribute name="nullFlavor" type="NullFlavor" use="optional"/>
        <xsd:attribute name="flavorId" type="xsd:string" use="optional"/>
        <xsd:attribute name="updateMode" type="UpdateMode" use="optional"/>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:complexType name="II">
    <xsd:complexContent>
      <xsd:extension base="ANY">
        <xsd:attribute name="root" type="Uid" use="optional"/>
        <xsd:attribute name="extension" type="xsd:string" use="optional"/>
        <xsd:attribute name="identifierName" type="xsd:string" use="optional"/>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:complexType name="CD">
    <xsd:complexContent>
      <xsd:extension base="ANY">
        <xsd:attribute name="code" type="xsd:string" use="optional"/>
        <xsd:attribute name="codeSystem" type="Uid" use="optional"/>
        <xsd:attribute name="codeSystemName" type="xsd:string" use="optional"/>
        <xsd:attribute name="codeSystemVersion" type="xsd:string" use="optional"/>
        <xsd:attribute name="displayName" type="xsd:string" use="optional"/>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:complexType name="PQ">
    <xsd:complexContent>
      <xsd:extension base="ANY">
        <xsd:attribute name="value" type="Decimal" use="optional"></xsd:attribute>
        <xsd:attribute name="unit" type="Code" use="optional"></xsd:attribute>
      </xsd:extension>
    </xsd:complexContent>
  </xsd:complexType>
  <xsd:simpleType name="Decimal">
    <xsd:restriction base="xsd:double"/>
  </xsd:simpleType>
  <xsd:simpleType name="Code">
    <xsd:restriction base="xsd:string"/>
  </xsd:simpleType>
</xsd:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>file:/Users/mango/Projects/Inera/Develop/sklintyg/schemas/rivta/insuranceprocess-healthreporting/schemas/core_components/ws-addressing-1.0.xsd</con:url><con:content><![CDATA[<!--~ Copyright (C) 2016 Inera AB (http://www.inera.se)
  ~
  ~ This file is part of sklintyg (https://github.com/sklintyg).
  ~
  ~ sklintyg is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ sklintyg is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.-->
<!--W3C XML Schema defined in the Web Services Addressing 1.0 specification
    http://www.w3.org/TR/ws-addr-core

   Copyright © 2005 World Wide Web Consortium,

   (Massachusetts Institute of Technology, European Research Consortium for
   Informatics and Mathematics, Keio University). All Rights Reserved. This
   work is distributed under the W3C® Software License [1] in the hope that
   it will be useful, but WITHOUT ANY WARRANTY; without even the implied
   warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

   [1] http://www.w3.org/Consortium/Legal/2002/copyright-software-20021231

   $Id: ws-addr.xsd,v 1.4 2008/07/14 18:48:47 plehegar Exp $-->
<xs:schema targetNamespace="http://www.w3.org/2005/08/addressing" blockDefault="#all" elementFormDefault="qualified" finalDefault="" attributeFormDefault="unqualified" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://www.w3.org/2005/08/addressing">
  <!--Constructs from the WS-Addressing Core-->
  <xs:element name="EndpointReference" type="tns:EndpointReferenceType"/>
  <xs:complexType name="EndpointReferenceType" mixed="false">
    <xs:sequence>
      <xs:element name="Address" type="tns:AttributedURIType"/>
      <xs:element name="ReferenceParameters" type="tns:ReferenceParametersType" minOccurs="0"/>
      <xs:element ref="tns:Metadata" minOccurs="0"/>
      <xs:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:anyAttribute namespace="##other" processContents="lax"/>
  </xs:complexType>
  <xs:complexType name="ReferenceParametersType" mixed="false">
    <xs:sequence>
      <xs:any namespace="##any" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:anyAttribute namespace="##other" processContents="lax"/>
  </xs:complexType>
  <xs:element name="Metadata" type="tns:MetadataType"/>
  <xs:complexType name="MetadataType" mixed="false">
    <xs:sequence>
      <xs:any namespace="##any" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:anyAttribute namespace="##other" processContents="lax"/>
  </xs:complexType>
  <xs:element name="MessageID" type="tns:AttributedURIType"/>
  <xs:element name="RelatesTo" type="tns:RelatesToType"/>
  <xs:complexType name="RelatesToType" mixed="false">
    <xs:simpleContent>
      <xs:extension base="xs:anyURI">
        <xs:attribute name="RelationshipType" type="tns:RelationshipTypeOpenEnum" use="optional" default="http://www.w3.org/2005/08/addressing/reply"/>
        <xs:anyAttribute namespace="##other" processContents="lax"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:simpleType name="RelationshipTypeOpenEnum">
    <xs:union memberTypes="tns:RelationshipType xs:anyURI"/>
  </xs:simpleType>
  <xs:simpleType name="RelationshipType">
    <xs:restriction base="xs:anyURI">
      <xs:enumeration value="http://www.w3.org/2005/08/addressing/reply"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:element name="ReplyTo" type="tns:EndpointReferenceType"/>
  <xs:element name="From" type="tns:EndpointReferenceType"/>
  <xs:element name="FaultTo" type="tns:EndpointReferenceType"/>
  <xs:element name="To" type="tns:AttributedURIType"/>
  <xs:element name="Action" type="tns:AttributedURIType"/>
  <xs:complexType name="AttributedURIType" mixed="false">
    <xs:simpleContent>
      <xs:extension base="xs:anyURI">
        <xs:anyAttribute namespace="##other" processContents="lax"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <!--Constructs from the WS-Addressing SOAP binding-->
  <xs:attribute name="IsReferenceParameter" type="xs:boolean"/>
  <xs:simpleType name="FaultCodesOpenEnumType">
    <xs:union memberTypes="tns:FaultCodesType xs:QName"/>
  </xs:simpleType>
  <xs:simpleType name="FaultCodesType">
    <xs:restriction base="xs:QName">
      <xs:enumeration value="tns:InvalidAddressingHeader"/>
      <xs:enumeration value="tns:InvalidAddress"/>
      <xs:enumeration value="tns:InvalidEPR"/>
      <xs:enumeration value="tns:InvalidCardinality"/>
      <xs:enumeration value="tns:MissingAddressInEPR"/>
      <xs:enumeration value="tns:DuplicateMessageID"/>
      <xs:enumeration value="tns:ActionMismatch"/>
      <xs:enumeration value="tns:MessageAddressingHeaderRequired"/>
      <xs:enumeration value="tns:DestinationUnreachable"/>
      <xs:enumeration value="tns:ActionNotSupported"/>
      <xs:enumeration value="tns:EndpointUnavailable"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:element name="RetryAfter" type="tns:AttributedUnsignedLongType"/>
  <xs:complexType name="AttributedUnsignedLongType" mixed="false">
    <xs:simpleContent>
      <xs:extension base="xs:unsignedLong">
        <xs:anyAttribute namespace="##other" processContents="lax"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:element name="ProblemHeaderQName" type="tns:AttributedQNameType"/>
  <xs:complexType name="AttributedQNameType" mixed="false">
    <xs:simpleContent>
      <xs:extension base="xs:QName">
        <xs:anyAttribute namespace="##other" processContents="lax"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:element name="ProblemHeader" type="tns:AttributedAnyType"/>
  <xs:complexType name="AttributedAnyType" mixed="false">
    <xs:sequence>
      <xs:any namespace="##any" processContents="lax" minOccurs="1" maxOccurs="1"/>
    </xs:sequence>
    <xs:anyAttribute namespace="##other" processContents="lax"/>
  </xs:complexType>
  <xs:element name="ProblemIRI" type="tns:AttributedURIType"/>
  <xs:element name="ProblemAction" type="tns:ProblemActionType"/>
  <xs:complexType name="ProblemActionType" mixed="false">
    <xs:sequence>
      <xs:element ref="tns:Action" minOccurs="0"/>
      <xs:element name="SoapAction" minOccurs="0" type="xs:anyURI"/>
    </xs:sequence>
    <xs:anyAttribute namespace="##other" processContents="lax"/>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://localhost:8080/inera-certificate/register-certificate/v3.0</con:endpoint><con:endpoint>http://localhost:8080/inera-certificate/register-medical-certificate-stub</con:endpoint></con:endpoints><con:operation id="417db6a5-e5e9-4152-b726-cf953aa67d22" isOneWay="false" action="urn:riv:insuranceprocess:healthreporting:RegisterMedicalCertificateResponder:1" name="RegisterMedicalCertificate" bindingOperationName="RegisterMedicalCertificate" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="3e991388-d34f-4037-9327-26509436ebaa" name="Register"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/inera-certificate/register-certificate/v3.0</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
xmlns:add="http://www.w3.org/2005/08/addressing" 
xmlns="urn:riv:insuranceprocess:healthreporting:mu7263:3" 
xmlns:ns2="urn:riv:insuranceprocess:healthreporting:2" 
xmlns:ns3="urn:riv:insuranceprocess:healthreporting:RegisterMedicalCertificateResponder:3">
   <soapenv:Header>
      <add:To>1</add:To>
   </soapenv:Header>
   <soapenv:Body>
<ns3:RegisterMedicalCertificate>
   <ns3:lakarutlatande>
      <lakarutlatande-id>cf7a3ae5-06ed-4441-b652-b018e059f357</lakarutlatande-id>
      <typAvUtlatande>Läkarintyg enligt 3 kap, 8 § lagen (1962:381) om allmän försäkring</typAvUtlatande>
      <signeringsdatum>2016-03-03T13:33:59</signeringsdatum>
      <skickatDatum>2016-03-03T13:33:59</skickatDatum>
      <patient>
         <ns2:person-id root="1.2.752.129.2.1.3.1" extension="19121212-1212"/>
         <ns2:fullstandigtNamn>Tolvan Tolvansson</ns2:fullstandigtNamn>
      </patient>
      <skapadAvHosPersonal>
         <ns2:personal-id root="1.2.752.129.2.1.4.1" extension="IFV1239877878-1049"/>
         <ns2:fullstandigtNamn>Jan Nilsson</ns2:fullstandigtNamn>
         <ns2:forskrivarkod>0000000</ns2:forskrivarkod>
         <ns2:enhet>
            <ns2:enhets-id root="1.2.752.129.2.1.4.1" extension="IFV1239877878-1042"/>
            <ns2:arbetsplatskod root="1.2.752.29.4.71" extension="1234567890"/>
            <ns2:enhetsnamn>WebCert-Enhet1</ns2:enhetsnamn>
            <ns2:postadress>Storgatan 1</ns2:postadress>
            <ns2:postnummer>12345</ns2:postnummer>
            <ns2:postort>Småmåla</ns2:postort>
            <ns2:telefonnummer>0101234567890</ns2:telefonnummer>
            <ns2:epost>enhet1@webcert.invalid.se</ns2:epost>
            <ns2:vardgivare>
               <ns2:vardgivare-id root="1.2.752.129.2.1.4.1" extension="IFV1239877878-1041"/>
               <ns2:vardgivarnamn>WebCert-Vårdgivare1</ns2:vardgivarnamn>
            </ns2:vardgivare>
         </ns2:enhet>
      </skapadAvHosPersonal>
      <vardkontakt>
         <vardkontakttyp>Min_undersokning_av_patienten</vardkontakttyp>
         <vardkontaktstid>2016-03-03</vardkontaktstid>
      </vardkontakt>
      <aktivitet>
         <aktivitetskod>Arbetslivsinriktad_rehabilitering_ar_ej_aktuell</aktivitetskod>
      </aktivitet>
      <aktivitet>
         <aktivitetskod>Forandrat_ressatt_till_arbetsplatsen_ar_ej_aktuellt</aktivitetskod>
      </aktivitet>
      <bedomtTillstand>
         <beskrivning>Långsamt</beskrivning>
      </bedomtTillstand>
      <medicinsktTillstand>
         <beskrivning>Ensidig förlamning. Höger sida förlamad</beskrivning>
         <tillstandskod code="G81" codeSystem="1.2.752.116.1.1.1.1.3" codeSystemName="ICD-10"/>
      </medicinsktTillstand>
      <funktionstillstand>
         <beskrivning>100% nedsatthet</beskrivning>
         <typAvFunktionstillstand>Kroppsfunktion</typAvFunktionstillstand>
      </funktionstillstand>
      <funktionstillstand>
         <beskrivning>Helt begränsad till att börja med. Begränsning kan minskas efterhand.</beskrivning>
         <typAvFunktionstillstand>Aktivitet</typAvFunktionstillstand>
         <arbetsformaga>
            <motivering>Oförmåga att utföra arbete</motivering>
            <prognosangivelse>Aterstallas_delvis</prognosangivelse>
            <arbetsuppgift>
               <typAvArbetsuppgift>Truckförare</typAvArbetsuppgift>
            </arbetsuppgift>
            <arbetsformagaNedsattning>
               <varaktighetFrom>2016-03-10</varaktighetFrom>
               <varaktighetTom>2016-03-16</varaktighetTom>
               <nedsattningsgrad>Nedsatt_med_1/2</nedsattningsgrad>
            </arbetsformagaNedsattning>
            <arbetsformagaNedsattning>
               <varaktighetFrom>2016-03-03</varaktighetFrom>
               <varaktighetTom>2016-03-09</varaktighetTom>
               <nedsattningsgrad>Helt_nedsatt</nedsattningsgrad>
            </arbetsformagaNedsattning>
            <sysselsattning>
               <typAvSysselsattning>Nuvarande_arbete</typAvSysselsattning>
            </sysselsattning>
         </arbetsformaga>
      </funktionstillstand>
   </ns3:lakarutlatande>
</ns3:RegisterMedicalCertificate>   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="urn:riv:insuranceprocess:healthreporting:RegisterMedicalCertificateResponder:1"/><con:wsrmConfig version="1.2"/></con:call></con:operation></con:interface><con:testSuite id="aebe9e8a-8ecf-4642-a5ff-219440a13136" name="TestSuite - RMC"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="e87a4b87-97f4-42ef-a39b-3de0ac666721" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase - RMC" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Init test steps" id="0f339916-b1da-47bd-b52e-c144f6b50f04"><con:settings/><con:config><script>import com.eviware.soapui.support.GroovyUtils
import org.joda.time.LocalDateTime


def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
def projectPath = groovyUtils.projectPath


// --------------------------------------------------
//  Setup logging
// --------------------------------------------------

//def debug = false;
def debug = true;

// This property can be set from command line
// When set correctly we will use it
String debugProperty = com.eviware.soapui.SoapUI.globalProperties.getPropertyValue( "debug" )
context.debug = debugProperty.equalsIgnoreCase("true") || debugProperty.equalsIgnoreCase("false") ? (debugProperty.toBoolean()) : debug


if (context.debug) {
	
	def currentDataTime = new LocalDateTime()
	
	// Create a logfile
	def logFilePath = projectPath + "/target/soapui-logs/soapui-rehabstod.log"
	context.logFile = new File(logFilePath)
	
	if (context.logFile.exists()) {
	    assert context.logFile.delete()
	    assert context.logFile.createNewFile()
	}
	
	context.logFile.append currentDataTime.toString("yyyy-MM-dd HH:mm:ss") + " Start SOAPUI Rehabstöd\n"
	context.logFile.append "-------------------------------------------------------------------------\n"

}</script></con:config></con:testStep><con:testStep type="groovy" name="Init test data" id="d1c9e29c-43f9-4378-806a-0d43bcc02cf0"><con:settings/><con:config><script>import com.eviware.soapui.support.GroovyUtils
import org.joda.time.LocalDateTime

if (context.debug) context.logFile.append "\nStep: Init test data\n"

// --------------------------------------------------
//  Context properties that can be changed
// --------------------------------------------------

def defaultNumberOfPatients = 10
def defaultMaxIntygsGlapp = 15
def defaultMinIntygsLangd = 3
def defaultMaxIntygsLangd = 30

// These properties can be set from command line
// When set correctly we will use them
String numberOfPatientsProperty = com.eviware.soapui.SoapUI.globalProperties.getPropertyValue( "numberOfPatients" )
String maxIntygsGlappProperty = com.eviware.soapui.SoapUI.globalProperties.getPropertyValue( "maxIntygsGlapp" )
String minIntygsLangdProperty = com.eviware.soapui.SoapUI.globalProperties.getPropertyValue( "minIntygsLangd" )
String maxIntygsLangdProperty = com.eviware.soapui.SoapUI.globalProperties.getPropertyValue( "maxIntygsLangd" )

context.numberOfPatients = numberOfPatientsProperty?.isInteger() ? (numberOfPatientsProperty as int) : defaultNumberOfPatients
context.maxIntygsGlapp = maxIntygsGlappProperty?.isInteger() ? (maxIntygsGlappProperty as int) : defaultMaxIntygsGlapp
context.minIntygsLangd = minIntygsLangdProperty?.isInteger() ? (minIntygsLangdProperty as int) : defaultMinIntygsLangd
context.maxIntygsLangd = maxIntygsLangdProperty?.isInteger() ? (maxIntygsLangdProperty as int) : defaultMaxIntygsLangd


// --------------------------------------------------
//  These context properties shall not be changed
// --------------------------------------------------

// Read testpersonnummer
def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
def projectPath = groovyUtils.projectPath
def filePath = projectPath + "/testData/testpersonnummer_skatteverket.csv"

context.pnrLines = []

def currentYear = new Date().format( 'yyyy') as Integer

def tempLines = new File(filePath).readLines()
tempLines.remove(0)  // remove header
tempLines.each { pnr ->
     def yearOfBirth = pnr.substring(0, 4) as Integer
	def age = currentYear - yearOfBirth
	if (age > 25) {
		if (age &lt; 66) {
			context.pnrLines.add(pnr)
		}
	}
}

Collections.shuffle(context.pnrLines)

// Setup vårdgivare
context.careGiverId = 'IFV1239877878-1041'
context.careGiverName = 'Rehabstöd Vardgivare 1'

// Setup enheter
context.careUnits = ['TSTNMT2321000156-105N':'Rehabstöd Enhet 1', 'TSTNMT2321000156-105P':'Rehabstöd Enhet 2', 'TSTNMT2321000156-105Q':'Rehabstöd Enhet 3']

// Setup läkare
context.doctors = ['TSTNMT2321000156-105R':'Emma Nilsson', 'TSTNMT2321000156-105S':'Anders Karlsson', 'TSTNMT2321000156-105T':'Ingrid Nilsson Olsson']

// Setup diagnoskoder
context.tillstandskodsystemnamn = 'ICD-10'
context.tillstandsKoder = ['J11', 'G81', 'M46','F228', 'A23', 'H17']

// Setup nedsatthet
context.nedsattningsgrad = ['Helt_nedsatt', 'Nedsatt_med_3/4', 'Nedsatt_med_1/2', 'Nedsatt_med_1/4']

// Setup patientnamn
context.kvinnor = ['Karin', 'Erika', 'Matilda', 'Sara', 'Greta', 'Lisen', 'Inger', 'Katarina', 'Julia', 'Helena', 'Sandra', 'Moa', 'Linda', 'Anna', 'Gunilla', 'Carolina', 'Margareta', 'Filippa']
context.man = ['Holger', 'Alfred', 'Nils', 'Daniel', 'Mattias', 'Hans', 'Mårten', 'Gustav', 'Thomas', 'Peter', 'Fredrik', 'Erik','Magnus','Börje','Björn','Rolf','Jan','Åke']
context.efternamn = ['Karlsson', 'Larsson', 'Ericsson', 'Gustafsson', 'Persson', 'Andersson', 'Johansson', 'Martinsson', 'Jonsson', 'Fredriksson', 'Hansson','Nilsson','Bertilsson','Olofsson','Salomonsson','Magnusson']

// Set a loop index
if( context.loopIndex == null ) 
	context.loopIndex = 0

// Set the unit loop index
if( context.unitIndex == null ) 
	context.unitIndex = 0

if (context.debug) {
	context.logFile.append "numberOfPatients = " + context.numberOfPatients + "\n"
	context.logFile.append "maxIntygsGlapp = " + context.maxIntygsGlapp + "\n"
	context.logFile.append "minIntygsLangd = " + context.minIntygsLangd + "\n"
	context.logFile.append "maxIntygsLangd = " + context.maxIntygsLangd + "\n"
}	

</script></con:config></con:testStep><con:testStep type="groovy" name="Set static properties" id="4ceaf62f-cdf2-46d2-8b40-3ebb594fded2"><con:settings/><con:config><script>if (context.debug) context.logFile.append "\nStep: Set static properties\n"

// Set properties (these will not change during throughout the test case)
testRunner.testCase.setPropertyValue("vardgivare-id", context.careGiverId)
testRunner.testCase.setPropertyValue("vardgivare-namn", context.careGiverName)
testRunner.testCase.setPropertyValue("tillstandskodsystemnamn", context.tillstandskodsystemnamn)

if (context.debug) {
	context.logFile.append "vardgivare-id = " + context.careGiverId + "\n"	
	context.logFile.append "vardgivare-namn = " + context.careGiverName + "\n"
	context.logFile.append "tillstandskodsystemnamn = " + context.tillstandskodsystemnamn + "\n"
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Set patient properties" id="837c0958-613c-47d2-b29b-f739d480819e"><con:settings/><con:config><script>if (context.debug) context.logFile.append "\nStep: Set patient properties\n"

// Init values used when generating certificates
context.startDateActive = null
context.endDateActive = null
context.startDateBefore = null
context.endDateBefore = null
context.startDateAfter = null
context.endDateAfter = null

// Create patient data
def personId = context.pnrLines[context.loopIndex]
def personNamn = context.efternamn[new Random().nextInt(context.efternamn.size())]

if (personId[-2].toInteger() % 2 == 0)
	personNamn = context.kvinnor[new Random().nextInt(context.kvinnor.size())] + " " + personNamn
else
	personNamn = context.man[new Random().nextInt(context.man.size())] + " " + personNamn	

// Create which diagnoses code to use
def tillstandskod = context.tillstandsKoder[new Random().nextInt(context.tillstandsKoder.size())]

// Set the properties
testRunner.testCase.setPropertyValue("person-id", personId)
testRunner.testCase.setPropertyValue("person-namn", personNamn)	
testRunner.testCase.setPropertyValue("tillstandskod", tillstandskod )

if (context.debug) {
	context.logFile.append "person-id = " + personId + "\n"
	context.logFile.append "person-namn = " + personNamn + "\n"
	context.logFile.append "tillstandskod = " + tillstandskod + "\n"
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Set doctor properties" id="2a511bbb-144a-4cea-b030-16eae00f9132"><con:settings/><con:config><script>if (context.debug) context.logFile.append "\nStep: Set doctor properties\n"

// Randomly choose a doctor
def doctorIndex = new Random().nextInt(context.doctors.size())
def lakareId = context.doctors.iterator()[doctorIndex].key
def lakareNamn = context.doctors.iterator()[doctorIndex].value

def enhetId = ''
def enhetNamn = ''

if (doctorIndex == 0) {
	// The doctor in first position shall always map to the same care unit
	enhetId = context.careUnits.iterator()[doctorIndex].key		
	enhetNamn = context.careUnits.iterator()[doctorIndex].value		
} else {
	// Randomly choose between units except the first unit
	def careUnitIndex = new Random().nextInt(context.careUnits.size() - 1) + 1
	enhetId = context.careUnits.iterator()[careUnitIndex].key		
	enhetNamn = context.careUnits.iterator()[careUnitIndex].value		
}

testRunner.testCase.setPropertyValue("lakare-id", lakareId)
testRunner.testCase.setPropertyValue("lakare-namn", lakareNamn)
testRunner.testCase.setPropertyValue("enhet-id", enhetId)
testRunner.testCase.setPropertyValue("enhet-namn", enhetNamn)

if (context.debug) {
	context.logFile.append "lakare-id = " + lakareId + "\n"
	context.logFile.append "lakare-namn = " + lakareNamn + "\n"
	context.logFile.append "enhet-id = " + enhetId + "\n"
	context.logFile.append "enhet-namn = " + enhetNamn + "\n"
}
</script></con:config></con:testStep><con:testStep type="groovy" name="Loop" id="16bd7cbf-0cc8-4b47-aeab-9aa7472651dd"><con:settings/><con:config><script>if (context.debug) context.logFile.append "\nStep: Loop and create certificates\n"

if (context.loopIndex++ &lt; context.numberOfPatients) {

	def numberOfCertificates = new Random().nextInt(7) + 1  // [0 - 6] + 1 => a value 1 - 7
	def hasFutureCertificate = (new Random().nextInt(10) + 1 > 8 &amp;&amp; numberOfCertificates > 3) ? true : false

	testRunner.testCase.setPropertyValue("hasFutureCertificate", Boolean.toString(hasFutureCertificate))

	if (context.debug) {
		context.logFile.append "numberOfCertificates = " + numberOfCertificates + "\n"
		context.logFile.append "hasFutureCertificate = " + hasFutureCertificate + "\n"
	}

	// Create NN number of certificates for each patient
	for (int i = 0; i &lt; numberOfCertificates; i++) {
		context.certificateIndex = i
		testRunner.runTestStepByName("Set datetime properties")
		testRunner.runTestStepByName("SOAP Request")		
	}

	if (context.debug) context.logFile.append "\n*************************************************************************\n"
	
	// Loop back to patient test step
	if (context.loopIndex &lt; context.numberOfPatients) {
		testRunner.gotoStepByName("Set patient properties")
	} else {
		testRunner.cancel( "time to go home" )
		return null		
	}
}

</script></con:config></con:testStep><con:testStep type="groovy" name="Set datetime properties" id="a9927a99-5bee-4164-a178-90c94f2ae9a4"><con:settings/><con:config><script>import org.joda.time.LocalDateTime

if (context.debug) context.logFile.append "\nStep: Set datetime properties\n"

// For each certificate we create, we need a new ID
def guidVal = "${java.util.UUID.randomUUID()}"

// Let's randomize the amount of days between certificates
def intygsGlapp = new Random().nextInt(context.maxIntygsGlapp + 1)  // 5 + 1 => a value 0 - 5

// Let's randomize the length of the certificate
def intygsLangd = new Random().nextInt(context.maxIntygsLangd + 1 - context.minIntygsLangd) + context.minIntygsLangd;

// Let's randomize the working capacity
def nedsattningsgrad = context.nedsattningsgrad[new Random().nextInt(context.nedsattningsgrad.size())]

// Fetch property telling us to create a certificate in the future or not
String hasFutureCertificateProperty = testRunner.testCase.getPropertyValue("hasFutureCertificate")
def hasFutureCertificate = Boolean.parseBoolean(hasFutureCertificateProperty)

// For each certificate we create, we also need new dates
def currentDateTime = new LocalDateTime()
def startDate = null;
def endDate = null;

if (context.certificateIndex == 0) {
	if (context.debug) { 
		context.logFile.append "Skapa 'aktivtIntyg'\n"
		context.logFile.append "intygsLangd = " + intygsLangd + "\n"
	}
	context.startDateActive = currentDateTime.minusDays(1)
	context.endDateActive = context.startDateActive.plusDays(intygsLangd - 1)
	startDate = context.startDateActive
	endDate = context.endDateActive
	 	
} else if (hasFutureCertificate == true) {
	if (context.debug) { 
		context.logFile.append "Skapa intyg efter 'aktivtIntyg'\n"
		context.logFile.append "intygsGlapp = " + intygsGlapp + "\n"
		context.logFile.append "intygsLangd = " + intygsLangd + "\n"
	}
	if (context.startDateAfter == null) {
		context.startDateAfter = context.endDateActive		
	}
	context.startDateAfter = context.startDateAfter.plusDays(intygsGlapp + 1)
	context.endDateAfter = context.startDateAfter.plusDays(intygsLangd - 1)		
	startDate = context.startDateAfter
	endDate = context.endDateAfter

	// Reset if future certificates shall be created
	testRunner.testCase.setPropertyValue("hasFutureCertificate", "false")
 	
} else {
	if (context.debug) { 
		context.logFile.append "Skapa intyg innan 'aktivtIntyg'\n"
		context.logFile.append "intygsGlapp = " + intygsGlapp + "\n"
		context.logFile.append "intygsLangd = " + intygsLangd + "\n"
	}
	if (context.endDateBefore == null) {
		context.endDateBefore = context.startDateActive.minusDays(intygsGlapp + 1) 		
	} else {
		context.endDateBefore = context.startDateBefore.minusDays(intygsGlapp + 1)				
	}	
	context.startDateBefore = context.endDateBefore.minusDays(intygsLangd - 1)
	startDate = context.startDateBefore
	endDate = context.endDateBefore 	
}

def signeringsDatum = startDate.minusDays(1).plusHours(1).toString("yyyy-MM-dd'T'HH:mm:ss")
def skickatDatum = startDate.minusDays(1).plusHours(1).plusSeconds(30).toString("yyyy-MM-dd'T'HH:mm:ss")
def vardkontaktsTid = startDate.minusDays(2).toString("yyyy-MM-dd'T'HH:mm:ss")
def varaktighetFrom = startDate.toLocalDate().toString("yyyy-MM-dd")
def varaktighetTom = endDate.toLocalDate().toString("yyyy-MM-dd")

testRunner.testCase.setPropertyValue("lakarutlatande-id", guidVal)
testRunner.testCase.setPropertyValue("signeringsdatum", signeringsDatum)
testRunner.testCase.setPropertyValue("skickatDatum", skickatDatum)
testRunner.testCase.setPropertyValue("vardkontaktstid", vardkontaktsTid)
testRunner.testCase.setPropertyValue("varaktighetFrom", varaktighetFrom)
testRunner.testCase.setPropertyValue("varaktighetTom", varaktighetTom)
testRunner.testCase.setPropertyValue("nedsattningsgrad", nedsattningsgrad)

if (context.debug) {
	context.logFile.append "lakarutlatande-id = " + guidVal + "\n"
	context.logFile.append "signeringsdatum = " + signeringsDatum + "\n"
	context.logFile.append "skickatDatum = " + skickatDatum + "\n"
	context.logFile.append "vardkontaktstid = " + vardkontaktsTid + "\n"
	context.logFile.append "varaktighetFrom = " + varaktighetFrom + "\n"
	context.logFile.append "varaktighetTom = " + varaktighetTom + "\n"
	context.logFile.append "nedsattningsgrad = " + nedsattningsgrad + "\n"
}
</script></con:config></con:testStep><con:testStep type="request" name="SOAP Request" id="dcb50932-54b8-42b8-94dc-d98178a13a4a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RegisterMedicalCertificateResponderBinding</con:interface><con:operation>RegisterMedicalCertificate</con:operation><con:request name="SOAP Request" id="9a647655-ec32-443e-8d17-3587667c463f"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://localhost:8080/inera-certificate/register-certificate/v3.0</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:add="http://www.w3.org/2005/08/addressing" xmlns="urn:riv:insuranceprocess:healthreporting:mu7263:3" xmlns:ns2="urn:riv:insuranceprocess:healthreporting:2" xmlns:ns3="urn:riv:insuranceprocess:healthreporting:RegisterMedicalCertificateResponder:3">
   <soapenv:Header>
      <add:To>1</add:To>
   </soapenv:Header>
   <soapenv:Body>
      <ns3:RegisterMedicalCertificate>
         <ns3:lakarutlatande>
            <lakarutlatande-id>${#TestCase#lakarutlatande-id}</lakarutlatande-id>
            <typAvUtlatande>Läkarintyg enligt 3 kap, 8 § lagen (1962:381) om allmän försäkring</typAvUtlatande>
            <signeringsdatum>${#TestCase#signeringsdatum}</signeringsdatum>
            <skickatDatum>${#TestCase#skickatDatum}</skickatDatum>
            <patient>
               <ns2:person-id root="1.2.752.129.2.1.3.1" extension="${#TestCase#person-id}"/>
               <ns2:fullstandigtNamn>${#TestCase#person-namn}</ns2:fullstandigtNamn>
            </patient>
            <skapadAvHosPersonal>
               <ns2:personal-id root="1.2.752.129.2.1.4.1" extension="${#TestCase#lakare-id}"/>
               <ns2:fullstandigtNamn>${#TestCase#lakare-namn}</ns2:fullstandigtNamn>
               <ns2:forskrivarkod>0000000</ns2:forskrivarkod>
               <ns2:enhet>
                  <ns2:enhets-id root="1.2.752.129.2.1.4.1" extension="${#TestCase#enhet-id}"/>
                  <ns2:arbetsplatskod root="1.2.752.29.4.71" extension="1234567890"/>
                  <ns2:enhetsnamn>${#TestCase#enhet-namn}</ns2:enhetsnamn>
                  <ns2:postadress>Storgatan 1</ns2:postadress>
                  <ns2:postnummer>12345</ns2:postnummer>
                  <ns2:postort>Småmåla</ns2:postort>
                  <ns2:telefonnummer>0101234567890</ns2:telefonnummer>
                  <ns2:epost>${#TestCase#enhet-namn}@rehabstod.invalid.se</ns2:epost>
                  <ns2:vardgivare>
                     <ns2:vardgivare-id root="1.2.752.129.2.1.4.1" extension="${#TestCase#vardgivare-id}"/>
                     <ns2:vardgivarnamn>${#TestCase#vardgivare-namn}</ns2:vardgivarnamn>
                  </ns2:vardgivare>
               </ns2:enhet>
            </skapadAvHosPersonal>
            <vardkontakt>
               <vardkontakttyp>Min_undersokning_av_patienten</vardkontakttyp>
               <vardkontaktstid>${#TestCase#vardkontaktstid}</vardkontaktstid>
            </vardkontakt>
            <aktivitet>
               <aktivitetskod>Arbetslivsinriktad_rehabilitering_ar_ej_aktuell</aktivitetskod>
            </aktivitet>
            <aktivitet>
               <aktivitetskod>Forandrat_ressatt_till_arbetsplatsen_ar_ej_aktuellt</aktivitetskod>
            </aktivitet>
            <bedomtTillstand>
               <beskrivning>Det bedömda tillståndet är ...</beskrivning>
            </bedomtTillstand>
            <medicinsktTillstand>
               <beskrivning>Det medicinska tillståndet är ...</beskrivning>
               <tillstandskod code="${#TestCase#tillstandskod}" codeSystem="1.2.752.116.1.1.1.1.3" codeSystemName="${#TestCase#tillstandskodsystemnamn}"/>
            </medicinsktTillstand>
            <funktionstillstand>
               <beskrivning>100% nedsatthet</beskrivning>
               <typAvFunktionstillstand>Kroppsfunktion</typAvFunktionstillstand>
            </funktionstillstand>
            <funktionstillstand>
               <beskrivning>Tillstånder är allvarligt men stabilt</beskrivning>
               <typAvFunktionstillstand>Aktivitet</typAvFunktionstillstand>
               <arbetsformaga>
                  <motivering>Oförmåga att utföra arbete pga ...</motivering>
                  <prognosangivelse>Aterstallas_delvis</prognosangivelse>
                  <arbetsuppgift>
                     <typAvArbetsuppgift>Patientens arbetsuppgift(er) är ...</typAvArbetsuppgift>
                  </arbetsuppgift>
                  <arbetsformagaNedsattning>
                     <varaktighetFrom>${#TestCase#varaktighetFrom}</varaktighetFrom>
                     <varaktighetTom>${#TestCase#varaktighetTom}</varaktighetTom>
                     <nedsattningsgrad>${#TestCase#nedsattningsgrad}</nedsattningsgrad>
                  </arbetsformagaNedsattning>
                  <sysselsattning>
                     <typAvSysselsattning>Nuvarande_arbete</typAvSysselsattning>
                  </sysselsattning>
               </arbetsformaga>
            </funktionstillstand>
         </ns3:lakarutlatande>
      </ns3:RegisterMedicalCertificate>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="eb794aab-138e-4451-a456-4ac09017ec31"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:tearDownScript>def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context) 
def projectPath = groovyUtils.projectPath 
def logFile = new File(projectPath + "/logs/soapUI-Logs-to-file.txt")
for ( testCaseResult in testRunner.results ) {
	for ( testStepResult in testCaseResult.getMessages() )
	{
		testStepResult.each() { msg -> logFile.append(msg) }
	}
}</con:tearDownScript><con:properties><con:property><con:name>lakarutlatande-id</con:name><con:value>cceb7c39-9125-405b-91df-81f1c6e2a23f</con:value></con:property><con:property><con:name>signeringsdatum</con:name><con:value>2017-02-05T15:18:57</con:value></con:property><con:property><con:name>skickatDatum</con:name><con:value>2017-02-05T15:19:27</con:value></con:property><con:property><con:name>person-id</con:name><con:value>19901113-2389</con:value></con:property><con:property><con:name>person-namn</con:name><con:value>Anna Johansson</con:value></con:property><con:property><con:name>lakare-id</con:name><con:value>TSTNMT2321000156-105R</con:value></con:property><con:property><con:name>lakare-namn</con:name><con:value>Emma Nilsson</con:value></con:property><con:property><con:name>enhet-id</con:name><con:value>TSTNMT2321000156-105N</con:value></con:property><con:property><con:name>enhet-namn</con:name><con:value>Rehabstöd Enhet 1</con:value></con:property><con:property><con:name>vardgivare-id</con:name><con:value>IFV1239877878-1041</con:value></con:property><con:property><con:name>vardgivare-namn</con:name><con:value>Rehabstöd Vardgivare 1</con:value></con:property><con:property><con:name>vardkontaktstid</con:name><con:value>2017-02-04T14:18:57</con:value></con:property><con:property><con:name>tillstandskod</con:name><con:value>H17</con:value></con:property><con:property><con:name>tillstandskodsystemnamn</con:name><con:value>ICD-10</con:value></con:property><con:property><con:name>varaktighetFrom</con:name><con:value>2017-02-06</con:value></con:property><con:property><con:name>varaktighetTom</con:name><con:value>2017-02-11</con:value></con:property><con:property><con:name>nedsattningsgrad</con:name><con:value>Nedsatt_med_1/2</con:value></con:property><con:property><con:name>hasFutureCertificate</con:name><con:value>false</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>lakarutlatande-id</con:name><con:value>foo1234</con:value></con:property></con:properties><con:setupScript/></con:testSuite><con:properties><con:property><con:name>lakarutlatande-id</con:name><con:value>b286b43a-467b-41f8-8fb6-d2d45402456c</con:value></con:property></con:properties><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/><con:sensitiveInformation/></con:soapui-project>